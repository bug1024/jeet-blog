---
layout:     post
title:      "PHP7"
subtitle:   "PHP7性能"
date:       2017-12-16
author:     "Bug1024"
header-img: "img/tree.jpg"
tags:
    - PHP
---

## 高性能
`PHP7`是一个比较底层升级，比起`PHP5`的变化比较大，而就性能优化层面，大致可以汇总如下：

* 将基础变量从struct（结构体）变为union（联合体），节省内存空间，间接减少CPU在内存分配和管理上的开销。
* 部分基础变量（zend_array、zend_string等）采用内存空间连续分配的方式，降低CPU Cache Miss的发生的概率。CPU从CPU Cache获取数据和从内存获取，它们之间效率相差可以高达100倍。举一个近似的例子，系统从内存读取数据和从磁盘读取数据的效率差别很大，CPU Cache Miss类似遇到缺页中断。
* 通过宏定义和内联函数（inline），让编译器提前完成部分工作。无需在程序运行时分配内存，能够实现类似函数的功能，却没有函数调用的压栈、弹栈开销，效率会比较高。

未完待续...


## 参考
* [QQ会员活动运营平台PHP7升级实践](https://cloud.tencent.com/developer/article/1004328)
